<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C/DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">
  <head>
    <meta http-equiv = "Content-Type" content = "text/html; charset=utf-8" />
    <meta http-equiv = "Content-Style-Type" content = "text/css" />
    <meta http-equiv = "Content-Script-Type" content = "text/javascript" />
  </head>
  <body>
    <h1>sworks.mqo.parser</h1>
    <!-- Generated by Ddoc from src\sworks\mqo\parser.d -->
<p class="summary-sec">Metasequoia モデルファイルとそれに類するフォーマットに利用できるパーサ。ランタイム版
</p>

<span class="summary-header-sec version-sec">0.0011(dmd2.060)
</span><br />


<span class="summary-header-sec date-sec">2012-Aug-16 02:48:01
</span><br />


<span class="summary-header-sec authors-sec">KUMA
</span><br />


<span class="summary-header-sec license-sec">CC0</span><br />



<dl class="module-members-sec"><dt><span class="decl">class <span class="psymbol">CachedFile</span>
: sworks.mqo.parser_core.ICachedBuffer;
</span></dt>

<dd><p class="summary-sec">std.stream.File をラップしようかと思ったけど、クソ遅いからやめた。<br />

 std.stdio.File ってなんで日本語ファイル名に対応してないんじゃああああああ<br />
</p>


<dl class="members-sec"><dt><span class="decl">int <span class="psymbol">CACHE_SIZE</span>
;
</span></dt>

<dd><p class="summary-sec">キャッシュサイズ。</p>


</dd>
<dt><span class="decl">string <span class="psymbol">filename</span>
;
</span></dt>

<dd><p class="summary-sec">現在読み込んでいるファイル名</p>


</dd>
<dt><span class="decl">File <span class="psymbol">file</span>
;
</span></dt>

<dd><p class="summary-sec">本体。std.stdio.File。</p>


</dd>
<dt><span class="decl">this(string <span class="param">filename</span>
, uint <span class="param">cursor</span>
 = cast(uint)0, uint <span class="param">line_number</span>
 = cast(uint)0, bool <span class="param">close_flag</span>
 = false);
</span></dt>

<dd><b>Params:</b><br />
<table border="1" frame="void" rules="rows" class="params"><tr><td class="params_id">string <span class="param">filename</span>
</td>

<td>対象とするファイル名</td></tr>
<tr><td class="params_id">uint <span class="param">cursor</span>
</td>

<td>対象ファイル先頭からのオフセットを指定するとそこから読み込む。</td></tr>
<tr><td class="params_id">uint <span class="param">line_number</span>
</td>

<td>対象ファイル内での行数。<span class="param">cursor</span>
 を指定した時は、ここも指定しないと行数がずれる。</td></tr>
<tr><td class="params_id">bool <span class="param">close_flag</span>
</td>

<td><span class="dkeyword">true</span>
 の時はファイルを開かずにおく。</td></tr>
</table><br />



</dd>
<dt><span class="decl">const @property size_t <span class="psymbol">position</span>
();
</span></dt>

<dd><p class="summary-sec">対象ファイル先頭からのオフセット</p>


</dd>
<dt><span class="decl">const @property size_t <span class="psymbol">line</span>
();
</span></dt>

<dd><p class="summary-sec">対象ファイル内での行数。</p>


</dd>
<dt><span class="decl">const @property bool <span class="psymbol">isOpen</span>
();
</span></dt>

<dd><p class="summary-sec">ファイルが開いているかどうか</p>


</dd>
<dt><span class="decl">const @property bool <span class="psymbol">eof</span>
();
</span></dt>

<dd><p class="summary-sec">ファイル終端に達しているかどうか</p>


</dd>
<dt><span class="decl">@property CachedFile <span class="psymbol">dup</span>
();
</span></dt>

<dd><p class="summary-sec">複製を返す。返された CachedFile は開かれていない状態である。</p>


</dd>
<dt><span class="decl">@property const(byte)[] <span class="psymbol">cache</span>
();
</span></dt>

<dd><p class="summary-sec">1次キャッシュの中身を返す。</p>


</dd>
<dt><span class="decl">@property immutable(byte)[] <span class="psymbol">buffer</span>
();
</span></dt>

<dd><p class="summary-sec">2次キャッシュの中身を返す。</p>


</dd>
<dt><span class="decl">void <span class="psymbol">open</span>
();
<br />
void <span class="psymbol">open</span>
(jstring <span class="param">filename</span>
);
</span></dt>

<dd><p class="summary-sec">ファイルを開く。ファイルが既に開かれている場合はなにもしない。</p>


</dd>
<dt><span class="decl">void <span class="psymbol">close</span>
();
</span></dt>

<dd><p class="summary-sec">ファイルを閉じる。</p>


</dd>
<dt><span class="decl">const @property byte <span class="psymbol">peep</span>
();
</span></dt>

<dd><p class="summary-sec">1次キャッシュの先頭の1バイトを読み取る。カーソルは進めない。</p>


</dd>
<dt><span class="decl">byte <span class="psymbol">discard</span>
(size_t <span class="param">s</span>
 = 1);
</span></dt>

<dd><p class="summary-sec">カーソルを進める。
</p>

<b>Params:</b><br />
<table border="1" frame="void" rules="rows" class="params"><tr><td class="params_id">size_t <span class="param">s</span>
</td>

<td>s個進める。</td></tr>
</table><br />



</dd>
<dt><span class="decl">byte <span class="psymbol">push</span>
(size_t <span class="param">s</span>
 = 1);
</span></dt>

<dd><p class="summary-sec">現在の1次キャッシュの先頭から <span class="param">s</span>
 バイトを2次キャッシュに溜め、その分のカーソルを進める。
</p>

<b>Params:</b><br />
<table border="1" frame="void" rules="rows" class="params"><tr><td class="params_id">size_t <span class="param">s</span>
</td>

<td><span class="param">s</span>
 個溜める。</td></tr>
</table><br />



</dd>
<dt><span class="decl">immutable(byte)[] <span class="psymbol">getBinary</span>
(size_t <span class="param">size</span>
);
</span></dt>

<dd><p class="summary-sec">カーソル位置からデータを読み取る。
</p>

<b>Param:</b><br />

<span class="param">size</span>
 = <span class="param">size</span>
 バイト読み取る。<br />
<br />


</dd>
<dt><span class="decl">void <span class="psymbol">flush</span>
();
</span></dt>

<dd><p class="summary-sec">2次キャッシュをクリアする。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">OBJECT <span class="psymbol">load</span>
(OBJECT)(string <span class="param">filename</span>
);
</span></dt>

<dd><p class="summary-sec">ファイル -&gt; D言語のオブジェクト
</p>

<b>Params:</b><br />
<table border="1" frame="void" rules="rows" class="params"><tr><td class="params_id">filename</td>

<td>ファイル名。</td></tr>
<tr><td class="params_id">OBJECT</td>

<td>OBJECT.HEADER に、ヘッダ文字列をしこんでおく。</td></tr>
</table><br />


<b>Returns:</b><br />

中身のばっちりつまった OBJECT型のインスタンス。
<br />
<br />

<b>Throws:</b><br />

Exception パースに失敗した場合投げられる。<br />
<br />


</dd>
</dl>


  </body>
</html>

