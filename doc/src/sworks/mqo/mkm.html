<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C/DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">
  <head>
    <meta http-equiv = "Content-Type" content = "text/html; charset=utf-8" />
    <meta http-equiv = "Content-Style-Type" content = "text/css" />
    <meta http-equiv = "Content-Script-Type" content = "text/javascript" />
  </head>
  <body>
    <h1>sworks.mqo.mkm</h1>
    <!-- Generated by Ddoc from src\sworks\mqo\mkm.d -->
<p class="summary-sec">Mikoto モーションファイルフォーマット .<span class="psymbol">mkm</span>
 を読み込む。
</p>

<span class="summary-header-sec version-sec">0.0011(dmd2.060)
</span><br />


<span class="summary-header-sec date-sec">2012-Aug-16 02:48:01
</span><br />


<span class="summary-header-sec authors-sec">KUMA
</span><br />


<span class="summary-header-sec license-sec">CC0</span><br />



<dl class="module-members-sec"><dt><span class="decl">class <span class="psymbol">MKMotion</span>
;
</span></dt>

<dd><p class="summary-sec">.mkm の最外側</p>


<dl class="members-sec"><dt><span class="decl">string <span class="psymbol">HEADER</span>
;
</span></dt>

<dd><p class="summary-sec">.mkm ファイルのヘッダにヒットする。</p>


</dd>
<dt><span class="decl">string <span class="psymbol">version_string</span>
;
</span></dt>

<dd><p class="summary-sec">現在は "2" が入るはず。</p>


</dd>
<dt><span class="decl">MotionChunk[immutable(byte)[]] <span class="psymbol">motion</span>
;
</span></dt>

<dd><p class="summary-sec">モーションチャンク。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">class <span class="psymbol">MotionChunk</span>
: sworks.mqo.parser_core.INamed;
</span></dt>

<dd><p class="summary-sec">モーションチャンク</p>


<dl class="members-sec"><dt><span class="decl">jstring <span class="psymbol">name_data</span>
;
</span></dt>

<dd><p class="summary-sec">名前は、mksとmkmで、または階層によって意味が違うようである。</p>


</dd>
<dt><span class="decl">MotionChunk[immutable(byte)[]] <span class="psymbol">motion</span>
;
</span></dt>

<dd><p class="summary-sec">.mks ファイルでは MotionChunk は入れ子になる。<br />

 1階層目 -&gt; モーションの名前
 2階層目 -&gt; 対応するキャラクタ(3Dモデル)名</p>


</dd>
<dt><span class="decl">VectorChunk[immutable(byte)[]] <span class="psymbol">vector</span>
;
</span></dt>

<dd><p class="summary-sec">平行移動を記述する。<br />

 <span class="psymbol">vector</span>
 チャンクと quaternion チャンクは必ずしも一対一で対応するものではなく、
 どちらか片方という場合もある。<br />
</p>


</dd>
<dt><span class="decl">QuaternionChunk[immutable(byte)[]] <span class="psymbol">quaternion</span>
;
</span></dt>

<dd><p class="summary-sec">ボーンの原点まわりの回転移動を記述する。<br />

 回転の初期位置は、ボーンのローカル座標の軸がワールド座標の軸と一致している状態であるようだ。<br />

 ここで、ボーンのローカル座標の軸とは、ボーンの斜辺の対角を原点とし、第二長辺をZ軸正の向きとし、
 最短辺と第二長辺の外積をX軸正の向きと定めると、うまくいくようだ。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">class <span class="psymbol">VectorChunk</span>
: sworks.mqo.parser_core.INamed, sworks.mqo.parser_core.IOwnParser;
</span></dt>

<dd><p class="summary-sec">ベクターチャンク</p>


<dl class="members-sec"><dt><span class="decl">jstring <span class="psymbol">name_data</span>
;
</span></dt>

<dd><p class="summary-sec">ベクターチャンク名は対象とするボーンの名前の先頭に "j_" を付加したものの様だが、なぜなのかは分らない。</p>


</dd>
<dt><span class="decl">string <span class="psymbol">class_data</span>
;
</span></dt>

<dd><br />
<br />

</dd>
<dt><span class="decl">string <span class="psymbol">member</span>
;
</span></dt>

<dd><br />
<br />

</dd>
<dt><span class="decl">int <span class="psymbol">endframe</span>
;
</span></dt>

<dd><br />
<br />

</dd>
<dt><span class="decl">string <span class="psymbol">curve</span>
;
</span></dt>

<dd><p class="summary-sec">mkm 内で現れる場合と、mks 内で現れる場合で、型がちがうようである。</p>


</dd>
<dt><span class="decl">FramedTranslation!(float)[] <span class="psymbol">translation</span>
;
</span></dt>

<dd><p class="summary-sec">各キーフレーム毎の平行移動の状態を示す。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">class <span class="psymbol">QuaternionChunk</span>
: sworks.mqo.parser_core.INamed, sworks.mqo.parser_core.IOwnParser;
</span></dt>

<dd><p class="summary-sec">クォータニオンチャンク</p>


<dl class="members-sec"><dt><span class="decl">jstring <span class="psymbol">name_data</span>
;
</span></dt>

<dd><br />
<br />

</dd>
<dt><span class="decl">string <span class="psymbol">class_data</span>
;
</span></dt>

<dd><br />
<br />

</dd>
<dt><span class="decl">string <span class="psymbol">member</span>
;
</span></dt>

<dd><br />
<br />

</dd>
<dt><span class="decl">int <span class="psymbol">endframe</span>
;
</span></dt>

<dd><br />
<br />

</dd>
<dt><span class="decl">string <span class="psymbol">curve</span>
;
</span></dt>

<dd><br />
<br />

</dd>
<dt><span class="decl">FramedRotation!(float)[] <span class="psymbol">rotation</span>
;
</span></dt>

<dd><br />
<br />

</dd>
</dl>

</dd>
</dl>


  </body>
</html>

